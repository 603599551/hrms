webpackJsonp([9],{"/KOB":function(e,t){},Gu7T:function(e,t,r){"use strict";t.__esModule=!0;var a,n=r("c/Tr"),o=(a=n)&&a.__esModule?a:{default:a};t.default=function(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return(0,o.default)(e)}},HNT5:function(e,t){},jojy:function(e,t){},lHLu:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=r("Xxa5"),n=r.n(a),o=r("exGp"),s=r.n(o),i=r("gyMJ"),c=r("ecGJ"),l=r("Gu7T"),d=r.n(l),u=r("Dd8w"),m=r.n(u),f=r("NYxO"),p={name:"app-add-job",data:function(){return{tree:[],checkedKeys:[],form:{name:"",desc:""},rules:{name:[{required:!0,message:"请输入职务名称",trigger:"blur"}]}}},computed:m()({},Object(f.d)("stateChange",["btnLoading"])),methods:{getFormInfo:function(e,t){var r=this;return s()(n.a.mark(function a(){var o;return n.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,e();case 2:1==(o=a.sent).code?r[t]=o.data||[]:r.$message.error(o.message);case 4:case"end":return a.stop()}},a,r)}))()},saveRecord:function(){var e=this;return s()(n.a.mark(function t(){var r;return n.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(i.f)(m()({},e.form,{menuIds:e.checkedKeys.join(",")}));case 2:1==(r=t.sent).code?e.closePanle():e.$message.error(r.message);case 4:case"end":return t.stop()}},t,e)}))()},submitForm:function(){var e=this;this.$refs.form.validate(function(t){t?e.saveRecord():console.log("error submit!")})},getCheckedKeys:function(){var e=this.$refs.tree.getHalfCheckedKeys(),t=this.$refs.tree.getCheckedKeys();this.checkedKeys=[].concat(d()(e),d()(t))},resetForm:function(){this.$refs.form.resetFields()},closePanle:function(){this.$emit("reloadEvent","reload")}},created:function(){var e=this;this.getFormInfo(s()(n.a.mark(function t(){return n.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(i.S)());case 1:case"end":return e.stop()}},t,e)})),"tree")}},h={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticStyle:{width:"70%"}},[r("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,"label-width":"100px",size:"small"}},[r("el-form-item",{attrs:{label:"职务名称",prop:"name"}},[r("el-input",{attrs:{clearable:"",placeholder:"请输入职务名称"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"职务描述",prop:"desc"}},[r("el-input",{attrs:{type:"textarea",rows:3,clearable:"",placeholder:"请输入职务描述..."},model:{value:e.form.desc,callback:function(t){e.$set(e.form,"desc",t)},expression:"form.desc"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"权限分配"}},[r("el-tree",{ref:"tree",attrs:{data:e.tree,"show-checkbox":"","default-expand-all":"","node-key":"id"},on:{"check-change":e.getCheckedKeys}})],1),e._v(" "),r("el-form-item",[r("el-button",{attrs:{type:"primary",loading:e.btnLoading},on:{click:e.submitForm}},[e._v("提交")]),e._v(" "),r("el-button",{on:{click:e.resetForm}},[e._v("重置")])],1)],1)],1)},staticRenderFns:[]};var b=r("VU/8")(p,h,!1,function(e){r("HNT5")},null,null).exports,v=r("mtWM"),g=r.n(v),k={name:"app-add-job",props:["recordId"],data:function(){return{tree:[],checkedKeys:[],form:{name:"",desc:""},rules:{name:[{required:!0,message:"请输入职务名称",trigger:"blur"}]}}},computed:m()({},Object(f.d)("stateChange",["btnLoading"])),methods:{getAllData:function(){var e=this;g.a.all([Object(i.S)(),Object(i.R)({id:this.recordId})]).then(g.a.spread(function(t,r){1==t.code&&(e.tree=t.data),1==r.code&&(e.form=r.job,e.checkedKeys=r.menuList)})).catch(function(e){console.log(e)})},saveRecord:function(){var e=this;return s()(n.a.mark(function t(){var r;return n.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(i._28)(m()({},e.form,{menuIds:e.checkedKeys.join(",")}));case 2:1==(r=t.sent).code?e.closePanle():e.$message.error(r.message);case 4:case"end":return t.stop()}},t,e)}))()},submitForm:function(){var e=this;this.$refs.form.validate(function(t){t?e.saveRecord():console.log("error submit!")})},getCheckedKeys:function(){var e=this.$refs.tree.getHalfCheckedKeys(),t=this.$refs.tree.getCheckedKeys();this.checkedKeys=[].concat(d()(e),d()(t))},resetForm:function(){this.$refs.form.resetFields()},closePanle:function(){this.$emit("reloadEvent","reload")}},created:function(){this.getAllData()}},_={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticStyle:{width:"70%"}},[r("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,"label-width":"100px",size:"small"}},[r("el-form-item",{attrs:{label:"职务名称",prop:"name"}},[r("el-input",{attrs:{clearable:"",placeholder:"请输入职务名称"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"职务描述",prop:"desc"}},[r("el-input",{attrs:{type:"textarea",rows:3,clearable:"",placeholder:"请输入职务描述..."},model:{value:e.form.desc,callback:function(t){e.$set(e.form,"desc",t)},expression:"form.desc"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"权限分配"}},[r("el-tree",{ref:"tree",attrs:{data:e.tree,"show-checkbox":"","default-expand-all":"","node-key":"id","default-checked-keys":e.checkedKeys},on:{"check-change":e.getCheckedKeys}})],1),e._v(" "),r("el-form-item",[r("el-button",{attrs:{type:"primary",loading:e.btnLoading},on:{click:e.submitForm}},[e._v("提交")]),e._v(" "),r("el-button",{on:{click:e.resetForm}},[e._v("重置")])],1)],1)],1)},staticRenderFns:[]};var y=r("VU/8")(k,_,!1,function(e){r("jojy")},null,null).exports,x={name:"app-job-list",data:function(){return{list:[],loading:!1,dialog:{addVisible:!1,modVisible:!1},recordId:""}},methods:{recordHandler:function(e,t){this.dialog[t]=!0,this.recordId=e},getRecordList:function(){var e=this;return s()(n.a.mark(function t(){var r;return n.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.loading=!0,t.next=3,Object(i.Q)();case 3:1==(r=t.sent).code?e.list=r.data||[]:e.$message.error(r.message),e.loading=!1;case 6:case"end":return t.stop()}},t,e)}))()},deleteHandler:function(e){var t=this;this.$confirm("确认删除吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(s()(n.a.mark(function r(){var a;return n.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,Object(i.q)({id:e});case 2:1==(a=r.sent).code?(t.getRecordList(),t.$message.success(a.message)):t.$message.error(a.message);case 4:case"end":return r.stop()}},r,t)}))).catch(function(){})},reloadGetData:function(e){if("reload"==e){for(var t in this.dialog)this.dialog[t]=!1;this.getRecordList()}}},created:function(){this.getRecordList()},components:{AppDialog:c.a,AppAddJob:b,AppModJob:y}},w={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("nav",{staticClass:"app-location-wrapper"},[r("el-breadcrumb",{staticClass:"fl",attrs:{separator:"/"}},[r("el-breadcrumb-item",{attrs:{to:{path:"/sys_setting"}}},[e._v("系统管理")]),e._v(" "),r("el-breadcrumb-item",[e._v("组织机构")]),e._v(" "),r("el-breadcrumb-item",[e._v("职务管理")])],1),e._v(" "),r("el-button",{staticClass:"fr",attrs:{size:"small",icon:"el-icon-plus",type:"primary",plain:""},on:{click:function(t){e.dialog.addVisible=!0}}},[e._v("新增职务")])],1),e._v(" "),r("div",{staticClass:"component-main",staticStyle:{"padding-top":"10px"}},[r("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{size:"small",data:e.list,stripe:"",border:""}},[r("el-table-column",{attrs:{prop:"name",label:"职务名称",width:"200"}}),e._v(" "),r("el-table-column",{attrs:{prop:"staffs_count",label:"人数",width:"100"}}),e._v(" "),r("el-table-column",{attrs:{prop:"staffs",label:"人员"}}),e._v(" "),r("el-table-column",{attrs:{label:"操作",width:"160"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{attrs:{size:"mini"},on:{click:function(r){r.stopPropagation(),e.recordHandler(t.row.id,"modVisible")}}},[e._v("\r\n                        修改\r\n                    ")]),r("el-button",{attrs:{type:"danger",size:"mini"},on:{click:function(r){r.stopPropagation(),e.deleteHandler(t.row.id)}}},[e._v("\r\n                        删除\r\n                    ")])]}}])})],1)],1),e._v(" "),r("app-dialog",{attrs:{title:"新增职务",visible:e.dialog.addVisible},on:{"update:visible":function(t){e.$set(e.dialog,"addVisible",t)}}},[r("app-add-job",{on:{reloadEvent:e.reloadGetData}})],1),e._v(" "),r("app-dialog",{attrs:{title:"修改职务",visible:e.dialog.modVisible},on:{"update:visible":function(t){e.$set(e.dialog,"modVisible",t)}}},[r("app-mod-job",{attrs:{"record-id":e.recordId},on:{reloadEvent:e.reloadGetData}})],1)],1)},staticRenderFns:[]};var $=r("VU/8")(x,w,!1,function(e){r("/KOB")},null,null);t.default=$.exports}});