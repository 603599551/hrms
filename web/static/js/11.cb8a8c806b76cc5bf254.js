webpackJsonp([11],{"1G/e":function(t,e,a){"use strict";var n=a("Xxa5"),i=a.n(n),r=a("exGp"),s=a.n(r),l=a("gyMJ"),o={name:"ShiftMaterialPanel",props:{params:Object},data:function(){return{materialClassifyList:[],search:{classify:"",name:""},list:[],loading:!1,multipleSelection:[]}},methods:{getMaterialClassify:function(){var t=this;return s()(i.a.mark(function e(){var a;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(l._1)();case 3:1==(a=e.sent).data.code&&(t.materialClassifyList=a.data.list),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error(e.t0);case 10:case"end":return e.stop()}},e,t,[[0,7]])}))()},getMaterialList:function(){var t=this;return s()(i.a.mark(function e(){var a;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t.loading=!0,e.next=4,Object(l.y)({ids:t.params.ids,outWarehouseId:t.params.out_id,type2:t.search.classify,keyword:t.search.name});case 4:1==(a=e.sent).data.code?t.list=a.data.list:t.$message.error(a.data.message),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.error(e.t0);case 11:t.loading=!1;case 12:case"end":return e.stop()}},e,t,[[0,8]])}))()},handleSelectionChange:function(t){this.multipleSelection=t},searchHandle:function(){this.getMaterialList()},submitHandle:function(){this.$emit("reloadEvent",this.multipleSelection),this.closePanelHandle()},closePanelHandle:function(){this.params.isPlay=!1}},created:function(){this.getMaterialClassify(),this.getMaterialList()}},c={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"out-order-panel"},[a("div",{staticClass:"appManager-top"},[a("el-select",{staticClass:"fl",attrs:{clearable:"",placeholder:"原材料类别"},on:{change:t.searchHandle},model:{value:t.search.classify,callback:function(e){t.$set(t.search,"classify",e)},expression:"search.classify"}},t._l(t.materialClassifyList,function(t,e){return a("el-option",{key:e,attrs:{label:t.name,value:t.id}})})),t._v(" "),a("el-input",{staticClass:"fl",staticStyle:{width:"220px","margin-left":"10px"},attrs:{placeholder:"请输入原材料名称/编号","prefix-icon":"el-icon-search",clearable:""},nativeOn:{keyup:function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?t.searchHandle(e):null}},model:{value:t.search.name,callback:function(e){t.$set(t.search,"name",e)},expression:"search.name"}}),t._v(" "),a("el-button",{staticClass:"fr",attrs:{type:"primary"},on:{click:function(e){return e.stopPropagation(),t.submitHandle(e)}}},[t._v("添加")])],1),t._v(" "),a("div",{staticStyle:{padding:"20px 0"}},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],attrs:{data:t.list,border:""},on:{"selection-change":t.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"50"}}),t._v(" "),a("el-table-column",{attrs:{prop:"type_2_text",label:"分类"}}),t._v(" "),a("el-table-column",{attrs:{prop:"name",label:"名称"}}),t._v(" "),a("el-table-column",{attrs:{prop:"code",label:"物料编码"}}),t._v(" "),a("el-table-column",{attrs:{prop:"attribute_2_text",label:"规格"}}),t._v(" "),a("el-table-column",{attrs:{prop:"unit_text",label:"单位"}}),t._v(" "),a("el-table-column",{attrs:{prop:"batch_code",label:"批号"}}),t._v(" "),a("el-table-column",{attrs:{prop:"warehouse_stock_num",label:"当前库存"}})],1)],1),t._v(" "),a("div",{staticClass:"app-form-item tr"},[a("el-button",{on:{click:function(e){return e.stopPropagation(),t.closePanelHandle(e)}}},[t._v("退出")])],1)])},staticRenderFns:[]};var p=a("VU/8")(o,c,!1,function(t){a("AyZQ")},null,null);e.a=p.exports},"2UDV":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a("c/Tr"),i=a.n(n),r=a("Xxa5"),s=a.n(r),l=a("exGp"),o=a.n(l),c=a("Dd8w"),p=a.n(c),u=a("yTUl"),d=a("rpul"),m=a("1G/e"),f=a("NYxO"),h=a("gyMJ"),v={name:"CreateMoveDepot",data:function(){return{depot:{in:"",out:"",disabled:!0},depotInList:[],depotOutList:[],list:[],orderId:"",multipleSelection:[],addMaterialExtract:{isPlay:!1}}},watch:{list:function(t,e){t.length?this.setLeaveRemind(!0):this.setLeaveRemind(!1)}},methods:p()({},Object(f.b)(["setLeaveRemind"]),{addMaterialHandle:function(t){this.addMaterialExtract.isPlay=!0,this.addMaterialExtract.out_id=this.depot.out,this.addMaterialExtract.ids=this.list.map(function(t){return t.id}).join(",")},getDepotList:function(){var t=this;return o()(s.a.mark(function e(){var a;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(h.w)();case 3:1==(a=e.sent).data.code?(a.data.list.splice(0,1),t.depotOutList=a.data.list,t.depotInList=_.cloneDeep(a.data.list),t.depotInList.forEach(function(t){return t.disabled=!1})):t.$message.error(a.data.message),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error(e.t0);case 10:case"end":return e.stop()}},e,t,[[0,7]])}))()},reloadGetData:function(t){t.length>0&&(this.list=this.list.concat(t))},handleSelectionChange:function(t){this.multipleSelection=t},saveMaterialHandle:function(t){var e=this;return o()(s.a.mark(function a(){var n,i;return s.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(e.depot.out!==e.depot.in){a.next=2;break}return a.abrupt("return",e.$message.warning("移出库不能和移入库是同一个！"));case 2:if(a.prev=2,n={id:e.orderId,outWarehouseId:e.depot.out,inWarehouseId:e.depot.in,list:e.list.map(function(t){return{id:t.id,movement_num:t.movement_num}}),reason:""},i=null,"save"!=t){a.next=11;break}return a.next=8,Object(h._67)(n);case 8:i=a.sent,a.next=14;break;case 11:return a.next=13,Object(h._77)(n);case 13:i=a.sent;case 14:i&&1==i.data.code?(e.orderId=i.data.id||"",e.$message.success(i.data.message),"submit"==t&&(e.setLeaveRemind(!1),e.$router.push("/stock_manager_1/warehouse_movement"))):e.$message.error(i.data.message),a.next=20;break;case 17:a.prev=17,a.t0=a.catch(2),console.error(a.t0);case 20:case"end":return a.stop()}},a,e,[[2,17]])}))()},removeItemHandle:function(t){var e=this;if(!Array.isArray(t)&&0==(t=this.multipleSelection.map(function(t){return t.id})).length)return this.$message.warning("请勾选原材料名称！");t.forEach(function(t){return e.removeItemById(t)})},changeHandle:function(t){""!=t?(this.depot.disabled=!1,this.depotInList.forEach(function(e){e.id==t?e.disabled=!0:e.disabled=!1})):this.depot.disabled=!0},removeItemById:function(t){for(var e=0;e<this.list.length;e++)if(this.list[e].id==t){this.list.splice(e,1);break}},keyUpHandle:function(t){if(t.stopPropagation(),13===t.keyCode&&-1!==t.target.classList.value.search("el-input__inner")){var e=i()(document.querySelectorAll(".move-depot-table > .el-table__body-wrapper .el-input__inner")),a=e.findIndex(function(e){return e===t.target});if(-1===a)return;e[a=++a%e.length].focus()}return!1}}),created:function(){this.getDepotList()},mounted:function(){document.querySelector(".move-depot-table").addEventListener("keyup",this.keyUpHandle,!1)},destroyed:function(){document.querySelector(".move-depot-table").removeEventListener("keyup",this.keyUpHandle)},components:{EditNumber:u.a,ExtractPanel:d.a,ShiftMaterialPanel:m.a}},b={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"appManager-wrapper"},[a("div",{staticClass:"appManager-top"},[a("el-select",{staticClass:"fl",attrs:{clearable:"",placeholder:"移出仓库"},on:{change:t.changeHandle},model:{value:t.depot.out,callback:function(e){t.$set(t.depot,"out",e)},expression:"depot.out"}},t._l(t.depotOutList,function(t,e){return a("el-option",{key:e,attrs:{label:t.name,value:t.id}})})),t._v(" "),a("el-select",{staticClass:"fl",staticStyle:{"margin-left":"10px"},attrs:{clearable:"",placeholder:"移入仓库",disabled:t.depot.disabled},model:{value:t.depot.in,callback:function(e){t.$set(t.depot,"in",e)},expression:"depot.in"}},t._l(t.depotInList,function(t,e){return a("el-option",{key:e,attrs:{label:t.name,value:t.id,disabled:t.disabled}})})),t._v(" "),a("ul",{staticClass:"fr"},[a("el-button",{on:{click:function(e){return e.stopPropagation(),t.removeItemHandle(e)}}},[t._v("批量移除")]),t._v(" "),a("el-button",{on:{click:function(e){return e.stopPropagation(),t.addMaterialHandle(e)}}},[t._v("添加物品")]),t._v(" "),a("el-button",{on:{click:function(e){e.stopPropagation(),t.saveMaterialHandle("save")}}},[t._v("保存")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(e){e.stopPropagation(),t.saveMaterialHandle("submit")}}},[t._v("提交")])],1)],1),t._v(" "),a("div",{staticClass:"appManager-list"},[a("el-table",{staticClass:"move-depot-table",attrs:{data:t.list,border:""},on:{"selection-change":t.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"50"}}),t._v(" "),a("el-table-column",{attrs:{prop:"type_2_text",label:"分类"}}),t._v(" "),a("el-table-column",{attrs:{prop:"name",label:"名称"}}),t._v(" "),a("el-table-column",{attrs:{prop:"code",label:"物料编码"}}),t._v(" "),a("el-table-column",{attrs:{prop:"attribute_2_text",label:"规格"}}),t._v(" "),a("el-table-column",{attrs:{prop:"unit_text",label:"单位"}}),t._v(" "),a("el-table-column",{attrs:{prop:"batch_code",label:"批号"}}),t._v(" "),a("el-table-column",{attrs:{prop:"warehouse_stock_num",label:"当前库存"}}),t._v(" "),a("el-table-column",{attrs:{label:"移库数量"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("EditNumber",{attrs:{stepVal:1,maxVal:e.row.warehouse_stock_num},model:{value:e.row.movement_num,callback:function(a){t.$set(e.row,"movement_num",t._n(a))},expression:"scope.row.movement_num"}})]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"操作",width:"100",fixed:"right"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"text"},on:{click:function(a){a.stopPropagation(),t.removeItemHandle([e.row.id])}}},[a("i",{staticClass:"el-icon-delete"}),t._v(" 移除\r\n                    ")])]}}])})],1)],1),t._v(" "),a("ExtractPanel",{attrs:{params:t.addMaterialExtract}},[a("span",{attrs:{slot:"title"},slot:"title"},[t._v("选择原材料")]),t._v(" "),a("ShiftMaterialPanel",{attrs:{slot:"panel",params:t.addMaterialExtract},on:{reloadEvent:t.reloadGetData},slot:"panel"})],1)],1)},staticRenderFns:[]};var x=a("VU/8")(v,b,!1,function(t){a("UO48")},null,null);e.default=x.exports},"2dpe":function(t,e,a){var n=a("nuJ3");"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);a("rjj0")("79e8ae36",n,!0,{})},"5zde":function(t,e,a){a("zQR9"),a("qyJz"),t.exports=a("FeBl").Array.from},AyZQ:function(t,e,a){var n=a("bC58");"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);a("rjj0")("63982dfd",n,!0,{})},QlLH:function(t,e,a){var n=a("tvvF");"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);a("rjj0")("6ea2d616",n,!0,{})},UO48:function(t,e,a){var n=a("i1Xe");"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);a("rjj0")("bc55d760",n,!0,{})},bC58:function(t,e,a){(t.exports=a("FZ+f")(!1)).push([t.i,".out-order-panel{padding:20px;overflow:hidden}",""])},"c/Tr":function(t,e,a){t.exports={default:a("5zde"),__esModule:!0}},fBQ2:function(t,e,a){"use strict";var n=a("evD5"),i=a("X8DO");t.exports=function(t,e,a){e in t?n.f(t,e,i(0,a)):t[e]=a}},i1Xe:function(t,e,a){(t.exports=a("FZ+f")(!1)).push([t.i,"",""])},nuJ3:function(t,e,a){(t.exports=a("FZ+f")(!1)).push([t.i,".extract-masker{position:fixed;width:100%;height:100%;left:0;top:0;background:rgba(0,0,0,.2);z-index:8}.extract-wrapper{width:50%;height:calc(100% - 50px);position:fixed;top:50px;right:0;bottom:0;background:#f5f5f5;-webkit-transform:translateZ(0);transform:translateZ(0);-webkit-box-shadow:-3px 0 4px rgba(0,0,0,.1);box-shadow:-3px 0 4px rgba(0,0,0,.1);z-index:9}.extract-top{height:50px;border-bottom:1px solid #ccc;position:relative}.extract-top .title{line-height:50px;padding-left:15px;font-size:16px;font-weight:700;width:80%}.extract-top .extract-close{position:absolute;right:12px;top:10px;font-size:22px;padding:5px;cursor:pointer;-webkit-transition:all .3s ease;transition:all .3s ease}.extract-top .extract-close:hover{-webkit-transform:rotate(90deg);transform:rotate(90deg)}.extract-main{height:calc(100% - 51px);overflow-y:auto}.extract-main .no-info{text-align:center;padding-top:50px}#app .app-side-enter,#app .app-side-leave-to{opacity:0;-webkit-transform:translate3d(100%,0,0);transform:translate3d(100%,0,0)}#app .app-side-enter-to,#app .app-side-leave{opacity:1;-webkit-transform:translateZ(0);transform:translateZ(0)}#app .app-side-enter-active,#app .app-side-leave-active{-webkit-transition:all .5s ease-in-out;transition:all .5s ease-in-out}",""])},qyJz:function(t,e,a){"use strict";var n=a("+ZMJ"),i=a("kM2E"),r=a("sB3e"),s=a("msXi"),l=a("Mhyx"),o=a("QRG4"),c=a("fBQ2"),p=a("3fs2");i(i.S+i.F*!a("dY0y")(function(t){Array.from(t)}),"Array",{from:function(t){var e,a,i,u,d=r(t),m="function"==typeof this?this:Array,f=arguments.length,h=f>1?arguments[1]:void 0,v=void 0!==h,b=0,x=p(d);if(v&&(h=n(h,f>2?arguments[2]:void 0,2)),void 0==x||m==Array&&l(x))for(a=new m(e=o(d.length));e>b;b++)c(a,b,v?h(d[b],b):d[b]);else for(u=x.call(d),a=new m;!(i=u.next()).done;b++)c(a,b,v?s(u,h,[i.value,b],!0):i.value);return a.length=b,a}})},rpul:function(t,e,a){"use strict";var n={name:"ExtractPanel",data:function(){return{}},props:{params:{type:Object,default:function(){return{isPlay:!1}}},width:{type:String,default:"50%"},top:{type:String,default:"50px"}},methods:{handleClick:function(){this.params.isPlay=!1},eventHandle:function(t){t.stopPropagation(),this.params.isPlay&&(this.params.isPlay=!1)}},computed:{computHeight:function(){return-1==this.top.search("px")&&(this.top+="px"),"calc(100% - "+this.top+")"}},mounted:function(){document.getElementById("main").addEventListener("click",this.eventHandle,!1)},destroyed:function(){document.getElementById("main").removeEventListener("click",this.eventHandle)}},i={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("transition",{attrs:{name:"app-side"}},[t.params.isPlay?a("div",{staticClass:"extract-wrapper",style:{width:t.width,top:t.top,height:t.computHeight},on:{click:function(t){t.stopPropagation()}}},[a("div",{staticClass:"extract-top"},[a("h5",{staticClass:"title"},[t._t("title",[t._v("提示信息")])],2),t._v(" "),a("span",{staticClass:"extract-close",on:{click:function(e){return e.stopPropagation(),t.handleClick(e)}}},[a("i",{staticClass:"el-icon-close"})])]),t._v(" "),a("div",{staticClass:"extract-main"},[t._t("panel",[a("div",{staticClass:"no-info"},[t._v("暂无数据...")])])],2)]):t._e()])},staticRenderFns:[]};var r=a("VU/8")(n,i,!1,function(t){a("2dpe")},null,null);e.a=r.exports},tvvF:function(t,e,a){(t.exports=a("FZ+f")(!1)).push([t.i,".input-number-wrapper{display:inline-block;max-width:120px}.input-number-wrapper .el-input-number{width:100%}",""])},yTUl:function(t,e,a){"use strict";var n={name:"EditNumber",props:{value:{type:Number,default:1},ctrlPos:{type:String,default:""},minVal:{type:Number,default:0},maxVal:{type:Number,default:999999},stepVal:{type:Number,default:1},disabled:{type:Boolean,default:!1}},data:function(){return{dataVal:this.value}},computed:{promptMsg:function(){return this.value<0?"请输入数字":this.formatNumber(this.value)}},methods:{formatNumber:function(t){for(var e=(t+="").split("."),a="-"===e[0].charAt(0)?"-":"",n=a?e[0].slice(1):e[0],i="";n.length>3;)i=","+n.slice(-3)+i,n=n.slice(0,n.length-3);return n&&(i=n+i),""+a+i+(e[1]?"."+e[1]:"")},handleInput:function(t,e){var a=this;!isNaN(e)&&/^(0|[1-9][0-9]*)(\.[0-9]*)?$/.test(e)||""===e?(e>this.maxVal&&(e=Number(this.maxVal),this.$nextTick(function(){return t.target.value=e})),this.dataVal=Number(e),this.$emit("change",this.dataVal),this.$emit("input",this.dataVal)):this.$nextTick(function(){return t.target.value=a.dataVal})},handleChange:function(t){this.dataVal=Number(t),this.$emit("change",this.dataVal),this.$emit("input",this.dataVal)}}},i={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-tooltip",{attrs:{content:t.promptMsg,placement:"top"}},[a("div",{staticClass:"input-number-wrapper"},[a("el-input-number",{attrs:{size:"mini",value:t.value,min:t.minVal,max:t.maxVal,step:t.stepVal,"controls-position":t.ctrlPos,disabled:t.disabled},on:{change:t.handleChange},nativeOn:{input:function(e){t.handleInput(e,e.target.value)},click:function(t){t.stopPropagation()}}})],1)])},staticRenderFns:[]};var r=a("VU/8")(n,i,!1,function(t){a("QlLH")},null,null);e.a=r.exports}});
//# sourceMappingURL=11.cb8a8c806b76cc5bf254.js.map