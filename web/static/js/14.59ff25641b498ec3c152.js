webpackJsonp([14],{"+xrz":function(e,t,n){"use strict";var a=n("c/Tr"),i=n.n(a),r=n("Zrlr"),s=n.n(r),l=n("wxAW"),c=n.n(l),d=function(){function e(t){if(s()(this,e),this.setParams(t),!this.wrapper)throw new Error("组件参数有误！")}return c()(e,[{key:"setParams",value:function(e){this.wrapper=e.tbodyWrapper||this.wrapper||null,this.exceptIndexs=e.exceptCellIndexs||this.exceptIndexs||[],this.callback=e.callback||this.callback||null,this.currentNode=this.currentNode||null}},{key:"install",value:function(){this.bindEvent()}},{key:"bindEvent",value:function(){this.wrapper.addEventListener("mouseover",this.enterFunc.bind(this),!1),this.wrapper.addEventListener("mouseleave",this.leaveFunc.bind(this),!1)}},{key:"leaveFunc",value:function(){this.setCellStyle(-1),this.currentNode=null}},{key:"enterFunc",value:function(e){e.stopPropagation();var t=this.findParent(e.target,"td");if(t!=this.currentNode){this.currentNode=t;var n=this.findIndex(t.parentNode.children,t);this.setCellStyle(n),this.callback&&this.callback(this.findIndex(this.wrapper.children,t.parentNode),n)}}},{key:"setCellStyle",value:function(e){for(var t=this.wrapper.children,n=0,a=t.length;n<a;n++){for(var i=0,r=t[n].children.length;i<r;i++)t[n].children[i].classList.remove("ctd");-1!==e&&-1===this.exceptIndexs.indexOf(e)&&t[n].children[e].classList.add("ctd")}}},{key:"findParent",value:function(e,t){for(;e&&e!=document;){if(e.tagName.toLowerCase()===t)return e;e=e.parentNode}return null}},{key:"findIndex",value:function(e,t){return i()(e).findIndex(function(e){return e===t})}},{key:"updata",value:function(e){this.setParams(e)}},{key:"remove",value:function(){for(var e in this.wrapper.removeEventListener("mouseover",this.enterFunc,!1),this.wrapper.removeEventListener("mouseleave",this.leaveFunc,!1),this)this[e]=null}}]),e}();t.a=d},OnpG:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n("Xxa5"),i=n.n(a),r=n("exGp"),s=n.n(r),l=n("Dd8w"),c=n.n(l),d=n("gyMJ"),o=n("NYxO"),u=n("+xrz"),h={name:"app-time-guide",data:function(){return{list:[],tHeadData:{big:[],small:[]},fixedThead:[{key:-2,name:"",children:[{key:-2,name:"营业额"}]},{key:-1,name:"",children:[{key:-1,name:"顾客数"}]}]}},computed:c()({},Object(o.c)("dict",["planTheadList"]),Object(o.c)("stateChange",["btnLoading"])),watch:{planTheadList:function(e){this.initialTHeadHandle(this.planTheadList),this.initialListHandle()}},methods:c()({},Object(o.b)("dict",["createPlanTheadList"]),{initialTHeadHandle:function(e){var t=this;this.fixedThead.concat(e).forEach(function(e){t.tHeadData.big.push({name:e.name,key:e.key,col_num:e.children.length||1}),t.tHeadData.small=t.tHeadData.small.concat(e.children)}),this.tHeadData.small.sort(function(e,t){return e.key-t.key})},initialListHandle:function(){this.createRecord()},addRecordHandle:function(){this.createRecord()},checkInputHandle:function(e){var t=e.target.value.trim();/^\d|(\d-\d)$/.test(t)||""==t?e.target.classList.remove("danger"):e.target.classList.add("danger")},saveHandle:function(){var e=this;return s()(i.a.mark(function t(){var n;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(d.i)(e.list);case 2:1==(n=t.sent).code?e.$message.success(n.message):e.$message.error(n.message);case 4:case"end":return t.stop()}},t,e)}))()},getTimeGuideList:function(){var e=this;return s()(i.a.mark(function t(){var n;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(d.B)();case 2:1==(n=t.sent).code?e.list=n.data:e.$message.error(n.message);case 4:case"end":return t.stop()}},t,e)}))()},createRecord:function(){for(var e=[],t=0;t<this.tHeadData.small.length;t++)e.push({input:""});this.list.push(e)},getArrayTotal:function(e){return e.reduce(function(e,t){return Array.isArray(e)&&(e=e.length),e+t.length})}}),created:function(){this.getTimeGuideList(),this.planTheadList.length>0&&(this.initialTHeadHandle(this.planTheadList),this.initialListHandle())},mounted:function(){new u.a({tbodyWrapper:this.$refs.table.children[1],exceptCellIndexs:[],callback:function(e,t){}}).install()}},f={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("nav",{staticClass:"app-location-wrapper"},[n("el-breadcrumb",{staticClass:"fl",attrs:{separator:"/"}},[n("el-breadcrumb-item",{attrs:{to:{path:"/scheduling"}}},[e._v("排班管理")]),e._v(" "),n("el-breadcrumb-item",[e._v("排班管理")]),e._v(" "),n("el-breadcrumb-item",[e._v("可变工时")])],1),e._v(" "),e._m(0)],1),e._v(" "),n("div",{staticClass:"component-top"},[n("el-button",{staticClass:"fr",attrs:{size:"small",type:"primary",loading:e.btnLoading},on:{click:e.saveHandle}},[e._v("保存")]),e._v(" "),n("el-button",{staticClass:"fr",staticStyle:{"margin-right":"10px"},attrs:{size:"small",loading:e.btnLoading},on:{click:e.addRecordHandle}},[e._v("新增")])],1),e._v(" "),n("div",{staticClass:"component-main"},[n("table",{ref:"table",staticClass:"guide-list"},[n("thead",[n("tr",e._l(e.tHeadData.big,function(t,a){return n("th",{key:a,attrs:{colspan:t.col_num}},[e._v("\r\n                        "+e._s(t.name)+"\r\n                    ")])})),e._v(" "),n("tr",e._l(e.tHeadData.small,function(t,a){return n("th",{key:a,attrs:{width:"5%"}},[e._v("\r\n                        "+e._s(t.name)+"\r\n                    ")])}))]),e._v(" "),n("tbody",e._l(e.list,function(t,a){return n("tr",{key:a},e._l(t,function(t,i){return n("td",{key:i,attrs:{"data-index":a+","+i}},[n("el-input",{attrs:{size:"mini"},on:{blur:e.checkInputHandle},model:{value:t.input,callback:function(n){e.$set(t,"input",n)},expression:"item2.input"}})],1)}))}))])])])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"message-prompt fr"},[t("i",{staticClass:"el-icon-info"}),this._v("注意：输入数据的格式为单个数字（1）或区间（1-3）")])}]};var p=n("VU/8")(h,f,!1,function(e){n("k6ZQ")},null,null);t.default=p.exports},Zrlr:function(e,t,n){"use strict";t.__esModule=!0,t.default=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}},k6ZQ:function(e,t,n){var a=n("vgtg");"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);n("rjj0")("6cfc587c",a,!0,{})},vgtg:function(e,t,n){(e.exports=n("FZ+f")(!1)).push([e.i,".guide-list{width:100%;border:1px solid #dcdfe6;border-collapse:collapse;border-spacing:0;margin-bottom:10px}.guide-list thead th{padding:10px 0;border:1px solid #dcdfe6;background-color:#f5f7fa}.guide-list thead th>i{position:relative;top:20px}.guide-list tbody td{height:32px;padding:5px;vertical-align:middle;border:1px solid #dcdfe6}.guide-list tbody td .danger{border-color:red}.guide-list tbody>tr:hover,.guide-list tbody>tr>td.ctd{background-color:#f5f7fa}",""])},wxAW:function(e,t,n){"use strict";t.__esModule=!0;var a,i=n("C4MV"),r=(a=i)&&a.__esModule?a:{default:a};t.default=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),(0,r.default)(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}()}});
//# sourceMappingURL=14.59ff25641b498ec3c152.js.map