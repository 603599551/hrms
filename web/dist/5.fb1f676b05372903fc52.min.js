webpackJsonp([5],{249:function(e,t,a){function r(e){a(396)}var s=a(10)(a(283),a(363),r,null,null);e.exports=s.exports},256:function(e,t,a){function r(e){a(260)}var s=a(10)(a(257),a(259),r,null,null);e.exports=s.exports},257:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={name:"ExtractPanel",data:function(){return{}},props:{params:{type:Object,default:function(){return{isPlay:!1}}},width:{type:String,default:"50%"},top:{type:String,default:"50px"}},methods:{handleClick:function(){this.params.isPlay=!1},stopPropagationHandle:function(){event.stopPropagation()}},computed:{computHeight:function(){return-1==this.top.search("px")&&(this.top+="px"),"calc(100% - "+this.top+")"}},mounted:function(){var e=this;document.addEventListener("click",function(t){t.stopPropagation(),e.params.isPlay&&(e.params.isPlay=!1)},!1)}}},258:function(e,t,a){t=e.exports=a(4)(),t.push([e.i,".extract-masker{position:fixed;width:100%;height:100%;left:0;top:0;background:rgba(0,0,0,.2);z-index:8}.extract-wrapper{width:50%;height:calc(100% - 50px);position:fixed;top:50px;right:0;bottom:0;background:#f5f5f5;-webkit-transform:translateZ(0);transform:translateZ(0);box-shadow:-3px 0 4px rgba(0,0,0,.1);z-index:9}.extract-top{height:50px;border-bottom:1px solid #ccc;position:relative}.extract-top .title{line-height:50px;padding-left:15px;font-size:16px;font-weight:700;width:80%}.extract-top .extract-close{position:absolute;right:12px;top:10px;font-size:22px;padding:5px;cursor:pointer;transition:all .3s ease}.extract-top .extract-close:hover{-webkit-transform:rotate(90deg);transform:rotate(90deg)}.extract-main{height:calc(100% - 51px);overflow-y:auto}.extract-main .no-info{text-align:center;padding-top:50px}#app .app-side-enter,#app .app-side-leave-to{opacity:0;-webkit-transform:translate3d(100%,0,0);transform:translate3d(100%,0,0)}#app .app-side-enter-to,#app .app-side-leave{opacity:1;-webkit-transform:translateZ(0);transform:translateZ(0)}#app .app-side-enter-active,#app .app-side-leave-active{transition:all .5s ease-in-out}",""])},259:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("transition",{attrs:{name:"app-side"}},[e.params.isPlay?a("div",{staticClass:"extract-wrapper",style:{width:e.width,top:e.top,height:e.computHeight},on:{click:function(t){t.stopPropagation(),e.stopPropagationHandle(t)}}},[a("div",{staticClass:"extract-top"},[a("h5",{staticClass:"title"},[e._t("title",[e._v("提示信息")])],2),e._v(" "),a("span",{staticClass:"extract-close",on:{click:function(t){t.stopPropagation(),e.handleClick(t)}}},[a("i",{staticClass:"el-icon-close"})])]),e._v(" "),a("div",{staticClass:"extract-main"},[e._t("panel",[a("div",{staticClass:"no-info"},[e._v("暂无数据...")])])],2)]):e._e()])},staticRenderFns:[]}},260:function(e,t,a){var r=a(258);"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);a(11)("2ae3fb0e",r,!0)},272:function(e,t,a){"use strict";function r(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,a){function r(s,i){try{var n=t[s](i),l=n.value}catch(e){return void a(e)}if(!n.done)return Promise.resolve(l).then(function(e){r("next",e)},function(e){r("throw",e)});e(l)}return r("next")})}}Object.defineProperty(t,"__esModule",{value:!0});var s=a(22),i=a.n(s),n=a(21);a.n(n);t.default={name:"AddMaterialPanel",props:{params:Object,classid:{type:String,default:""}},data:function(){return{stufftypeList:[],repTypeList:[],unitList:[],form:{stufftypeId:this.classid,name:"",code:"",reptypeId:"",yield_rate:"100",unitId:"",purchase_price:"",balance_price:"",sort:"1000",desc:""}}},watch:{classid:function(e){this.form.stufftypeId=e}},methods:{getStufftypeList:function(){function e(){return t.apply(this,arguments)}var t=r(i.a.mark(function e(){var t;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,a.i(n.getMaterialSelTree)();case 3:t=e.sent,1==t.data.code&&(this.stufftypeList=t.data.list,this.stufftypeList.forEach(function(e){"0"===e.parent_id&&(e.disabled=!0)})),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error(e.t0);case 10:case"end":return e.stop()}},e,this,[[0,7]])}));return e}(),getStoryList:function(){function e(){return t.apply(this,arguments)}var t=r(i.a.mark(function e(){var t;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,a.i(n.getStuffToryList)({type:"query"});case 3:t=e.sent,1==t.data.code&&(this.repTypeList=t.data.list),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error(e.t0);case 10:case"end":return e.stop()}},e,this,[[0,7]])}));return e}(),getUnitList:function(){function e(){return t.apply(this,arguments)}var t=r(i.a.mark(function e(){var t;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,a.i(n.getUnitList)();case 3:t=e.sent,1==t.data.code&&(this.unitList=t.data.list),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error(e.t0);case 10:case"end":return e.stop()}},e,this,[[0,7]])}));return e}(),submitHandle:function(){var e=this;this.insertMaterialInfo(function(){e.$emit("reloadEvent","reload"),e.closePanelHandle()})},insertMaterialInfo:function(){function e(e){return t.apply(this,arguments)}var t=r(i.a.mark(function e(t){var r;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(""!=this.form.stufftypeId&&""!=this.form.name){e.next=2;break}return e.abrupt("return",this.$message({message:"请正确填写原材料信息再提交！",type:"warning"}));case 2:return e.prev=2,e.next=5,a.i(n.saveMaterialInfo)({type:this.form.stufftypeId,name:this.form.name,code:this.form.code,wm_type:this.form.reptypeId,yield_rate:this.form.yield_rate,unit:this.form.unitId,purchase_price:this.form.purchase_price,balance_price:this.form.balance_price,sort:this.form.sort,desc:this.form.desc});case 5:r=e.sent,1==r.data.code?(this.$message({type:"success",message:"原材料添加成功!"}),t&&t()):this.$message({type:"error",message:r.data.message}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),console.error(e.t0);case 12:case"end":return e.stop()}},e,this,[[2,9]])}));return e}(),closePanelHandle:function(){this.params.isPlay=!1}},created:function(){this.getStufftypeList(),this.getStoryList(),this.getUnitList()}}},283:function(e,t,a){"use strict";function r(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,a){function r(s,i){try{var n=t[s](i),l=n.value}catch(e){return void a(e)}if(!n.done)return Promise.resolve(l).then(function(e){r("next",e)},function(e){r("throw",e)});e(l)}return r("next")})}}Object.defineProperty(t,"__esModule",{value:!0});var s=a(22),i=a.n(s),n=a(256),l=a.n(n),o=a(338),c=a.n(o),p=a(348),d=a.n(p),u=a(21),f=(a.n(u),"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e});t.default={name:"MaterialManager",data:function(){return{data:[],filterText:"",checkedKeys:[],list:[],multipleSelection:[],curPageIndex:1,loading:!1,inventoryList:[],search:{inventoryId:"",searchVal:""},stuffIdForAdd:"",addMaterialExtract:{isPlay:!1},modMaterialExtract:{isPlay:!1}}},watch:{filterText:function(e){this.$refs.tree.filter(e)},checkedKeys:function(e,t){e.join()!==t.join()&&this.getMaterialList(1)}},methods:{checkChangeHandle:function(){this.getCheckedKeys()},getCheckedKeys:function(){this.checkedKeys=this.$refs.tree.getCheckedNodes().filter(function(e){return 0!=e.parent_id}).map(function(e){return e.id})},filterNode:function(e,t){return!e||-1!==t.label.indexOf(e)},addMaterialHandle:function(e){this.addMaterialExtract.isPlay=!0,void 0!==e&&"object"!=(void 0===e?"undefined":f(e))?this.stuffIdForAdd=e.toString():this.stuffIdForAdd=""},modItemHandle:function(e){this.modMaterialExtract.isPlay=!0,this.modMaterialExtract.itemId=e},getInventoryList:function(){function e(){return t.apply(this,arguments)}var t=r(i.a.mark(function e(){var t;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,a.i(u.getStuffToryList)({type:"query"});case 3:t=e.sent,1==t.data.code&&(this.inventoryList=t.data.list),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error(e.t0);case 10:case"end":return e.stop()}},e,this,[[0,7]])}));return e}(),getMaterialTree:function(){function e(){return t.apply(this,arguments)}var t=r(i.a.mark(function e(){var t;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,a.i(u.getMaterialTree)();case 3:t=e.sent,1==t.data.code&&(this.data=t.data.list),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error(e.t0);case 10:case"end":return e.stop()}},e,this,[[0,7]])}));return e}(),getMaterialList:function(){function e(e,a){return t.apply(this,arguments)}var t=r(i.a.mark(function e(t,r){var s;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===t&&(t=this.curPageIndex),this.loading=!0,e.prev=2,e.next=5,a.i(u.getMaterialInfo)({pageNum:t,pageSize:10,materialTypeIds:this.checkedKeys.join(","),inventoryId:this.search.inventoryId,keyword:this.search.searchVal});case 5:s=e.sent,1==s.data.code?(this.list=s.data.data.list,this.list.total=s.data.data.totalRow):this.list.total=0,r&&r(),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),console.error(e.t0);case 13:this.loading=!1;case 14:case"end":return e.stop()}},e,this,[[2,10]])}));return e}(),handleCurrentChange:function(e){this.curPageIndex=e,this.getMaterialList(e)},reloadGetData:function(e){"reload"==e&&this.getMaterialList(this.curPageIndex)},searchHandle:function(){this.getMaterialList(1)},handleSelectionChange:function(e){this.multipleSelection=e},importHandle:function(){},exportHandle:function(){},delItemHandle:function(e){var t=this;this.$confirm("确认"+("1"==e.status?"停用":"启用")+"此原材料吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(r(i.a.mark(function r(){var s;return i.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,a.i(u.delMaterialRecord)({id:e.id,state:"1"==e.status?"0":"1"});case 3:s=r.sent,1==s.data.code?(t.getMaterialList(t.curPageIndex),t.$message({type:"success",message:"操作成功!"})):t.$message({type:"error",message:s.data.message}),r.next=10;break;case 7:r.prev=7,r.t0=r.catch(0),console.error(r.t0);case 10:case"end":return r.stop()}},r,t,[[0,7]])}))).catch(function(){})},batchDelHandle:function(){var e=this;if(0==this.multipleSelection.length)return this.$message({type:"warning",message:"请勾选原材料记录再进行批量删除!"});this.$confirm("确认要删除选中的"+this.multipleSelection.length+"条记录吗？删除后将不能恢复！","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(r(i.a.mark(function t(){var r;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,a.i(u.batchDelMaterialRecord)({ids:e.multipleSelection.map(function(e){return e.id})});case 3:r=t.sent,1==r.data.code?(e.multipleSelection.forEach(function(t){return e.removeItemById(t.id)}),e.multipleSelection.splice(0),e.$message({type:"success",message:"操作成功!"})):e.$message({type:"error",message:r.data.message}),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.error(t.t0);case 10:case"end":return t.stop()}},t,e,[[0,7]])}))).catch(function(){})},removeItemById:function(e){for(var t=0;t<this.list.length;t++)if(this.list[t].id==e){this.list.splice(t,1);break}},renderContent:function(e,t){var a=this,r=t.node,s=t.data;t.store;return 0!=s.parent_id?e("span",{class:"tree-item",style:"flex: 1; display: flex; align-items: center; justify-content: space-between; padding-right: 8px;"},[e("span",null,[r.label]),e("span",{class:"tree-item-handle"},[e("el-dropdown",null,[e("span",{class:"tree-dropdown-link"},["操作"]),e("el-dropdown-menu",{slot:"dropdown",class:"tree-dropdown"},[e("li",{class:"el-dropdown-menu__item",on:{click:function(e){e.stopPropagation(),a.addMaterialHandle(s.id)}}},["新增原材料"])])])])]):e("span",{style:"flex: 1; display: flex; align-items: center; justify-content: space-between; padding-right: 8px;"},[e("span",null,[r.label])])},treeBindEvent:function(){for(var e=this.$el.getElementsByClassName("filter-tree")[0].getElementsByClassName("tree-item"),t=0;t<e.length;t++)e[t].parentNode.addEventListener("mouseenter",function(e){e.stopPropagation(),e.target.getElementsByClassName("tree-item-handle")[0].classList.add("show")},!1),e[t].parentNode.addEventListener("mouseleave",function(e){e.stopPropagation(),e.target.getElementsByClassName("tree-item-handle")[0].classList.remove("show")},!1)}},created:function(){this.getMaterialTree(),this.getInventoryList(),this.getMaterialList(this.curPageIndex)},mounted:function(){},components:{ExtractPanel:l.a,AddMaterialPanel:c.a,ModMaterialPanel:d.a}}},288:function(e,t,a){"use strict";function r(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,a){function r(s,i){try{var n=t[s](i),l=n.value}catch(e){return void a(e)}if(!n.done)return Promise.resolve(l).then(function(e){r("next",e)},function(e){r("throw",e)});e(l)}return r("next")})}}Object.defineProperty(t,"__esModule",{value:!0});var s=a(22),i=a.n(s),n=a(21);a.n(n);t.default={name:"ModMaterialPanel",props:{params:Object,classid:{type:String,default:""}},data:function(){return{itemId:this.params.itemId,stufftypeList:[],repTypeList:[],unitList:[],form:{stufftypeId:this.classid,name:"",code:"",reptypeId:"",yield_rate:"",unitId:"",purchase_price:"",balance_price:"",sort:"",desc:""}}},watch:{classid:function(e){this.form.stufftypeId=e}},methods:{getStufftypeList:function(){function e(){return t.apply(this,arguments)}var t=r(i.a.mark(function e(){var t;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,a.i(n.getMaterialSelTree)();case 3:t=e.sent,1==t.data.code&&(this.stufftypeList=t.data.list,this.stufftypeList.forEach(function(e){"0"===e.parent_id&&(e.disabled=!0)})),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error(e.t0);case 10:case"end":return e.stop()}},e,this,[[0,7]])}));return e}(),getStoryList:function(){function e(){return t.apply(this,arguments)}var t=r(i.a.mark(function e(){var t;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,a.i(n.getStuffToryList)({type:"query"});case 3:t=e.sent,1==t.data.code&&(this.repTypeList=t.data.list),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error(e.t0);case 10:case"end":return e.stop()}},e,this,[[0,7]])}));return e}(),getUnitList:function(){function e(){return t.apply(this,arguments)}var t=r(i.a.mark(function e(){var t;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,a.i(n.getUnitList)();case 3:t=e.sent,1==t.data.code&&(this.unitList=t.data.list),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error(e.t0);case 10:case"end":return e.stop()}},e,this,[[0,7]])}));return e}(),getItemInfo:function(){function e(){return t.apply(this,arguments)}var t=r(i.a.mark(function e(){var t;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,a.i(n.getMaterialRecord)({id:this.itemId});case 3:t=e.sent,1==t.data.code?(this.form.stufftypeId=t.data.data.type_2||"",this.form.name=t.data.data.name||"",this.form.code=t.data.data.code,this.form.reptypeId=t.data.data.wm_type,this.form.yield_rate=t.data.data.yield_rate,this.form.unitId=t.data.data.unit,this.form.purchase_price=t.data.data.purchase_price,this.form.balance_price=t.data.data.balance_price,this.form.sort=t.data.data.sort,this.form.desc=t.data.data.desc):this.$message({type:"error",message:t.data.message}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error(e.t0);case 10:case"end":return e.stop()}},e,this,[[0,7]])}));return e}(),submitHandle:function(){var e=this;this.updateMaterialInfo(function(){e.$emit("reloadEvent","reload"),e.closePanelHandle()})},updateMaterialInfo:function(){function e(e){return t.apply(this,arguments)}var t=r(i.a.mark(function e(t){var r;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(""!=this.form.stufftypeId&&""!=this.form.name){e.next=2;break}return e.abrupt("return",this.$message({message:"请正确填写原材料信息再提交！",type:"warning"}));case 2:return e.prev=2,e.next=5,a.i(n.updateMaterialRecord)({id:this.itemId,type:this.form.stufftypeId,name:this.form.name,code:this.form.code,wm_type:this.form.reptypeId,yield_rate:this.form.yield_rate,unit:this.form.unitId,purchase_price:this.form.purchase_price,balance_price:this.form.balance_price,sort:this.form.sort,desc:this.form.desc});case 5:r=e.sent,1==r.data.code?(this.$message({type:"success",message:"原材料修改成功!"}),t&&t()):this.$message({type:"error",message:r.data.message}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),console.error(e.t0);case 12:case"end":return e.stop()}},e,this,[[2,9]])}));return e}(),closePanelHandle:function(){this.params.isPlay=!1}},created:function(){this.getItemInfo(),this.getStufftypeList(),this.getStoryList(),this.getUnitList()}}},304:function(e,t,a){t=e.exports=a(4)(),t.push([e.i,"",""])},309:function(e,t,a){t=e.exports=a(4)(),t.push([e.i,".material-wrapper{height:100%}.material-tree-box{width:280px;padding:20px;max-height:calc(100% - 80px);position:absolute;background-color:#fff;overflow-y:auto}.material-tree-box .filter-tree{margin-top:10px}.material-tree-box .tree-item-handle.show{display:block}.material-tree-box .tree-dropdown-link{font-size:12px;color:#409eff;cursor:pointer}.tree-dropdown>li{font-size:12px;line-height:30px}.material-list-box{margin-left:340px}.material-top .el-dropdown{margin-left:10px}.material-top ul>.el-input{width:260px}.material-top ul>.el-select{width:180px;margin-right:10px}",""])},318:function(e,t,a){t=e.exports=a(4)(),t.push([e.i,"",""])},338:function(e,t,a){function r(e){a(391)}var s=a(10)(a(272),a(358),r,null,null);e.exports=s.exports},348:function(e,t,a){function r(e){a(405)}var s=a(10)(a(288),a(372),r,null,null);e.exports=s.exports},358:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-form-panel"},[a("div",{staticClass:"app-form-item"},[e._m(0),e._v(" "),a("div",{staticClass:"app-input-block"},[a("el-select",{attrs:{clearable:"",placeholder:"请选择原材料分类"},model:{value:e.form.stufftypeId,callback:function(t){e.$set(e.form,"stufftypeId",t)},expression:"form.stufftypeId"}},e._l(e.stufftypeList,function(e,t){return a("el-option",{key:t,attrs:{label:e.name,value:e.id,disabled:e.disabled}})}))],1)]),e._v(" "),a("div",{staticClass:"app-form-item"},[e._m(1),e._v(" "),a("div",{staticClass:"app-input-block"},[a("el-input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],class:{formDanger:e.errors.has("materialname")},attrs:{name:"materialname",clearable:"",placeholder:"请输入原材料名称..."},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}}),e._v(" "),e.errors.has("materialname")?a("span",{staticClass:"prompt-title"},[e._v(e._s(e.errors.first("materialname")))]):e._e()],1)]),e._v(" "),a("div",{staticClass:"app-form-item"},[a("label",{staticClass:"app-form-label"},[e._v("原材料编号")]),e._v(" "),a("div",{staticClass:"app-input-block"},[a("el-input",{attrs:{clearable:"",placeholder:"请输入原材料编号..."},model:{value:e.form.code,callback:function(t){e.$set(e.form,"code",t)},expression:"form.code"}})],1)]),e._v(" "),a("div",{staticClass:"app-form-item"},[e._m(2),e._v(" "),a("div",{staticClass:"app-input-block"},[a("el-select",{attrs:{clearable:"",placeholder:"请选择库存类型"},model:{value:e.form.reptypeId,callback:function(t){e.$set(e.form,"reptypeId",t)},expression:"form.reptypeId"}},e._l(e.repTypeList,function(e,t){return a("el-option",{key:t,attrs:{label:e.name,value:e.id}})}))],1)]),e._v(" "),a("div",{staticClass:"app-form-item"},[e._m(3),e._v(" "),a("div",{staticClass:"app-input-block"},[a("el-input",{directives:[{name:"validate",rawName:"v-validate",value:"required|decimal:5",expression:"'required|decimal:5'"}],class:{formDanger:e.errors.has("yieldrate")},attrs:{name:"yieldrate",clearable:"",placeholder:"请输入出成率..."},model:{value:e.form.yield_rate,callback:function(t){e.$set(e.form,"yield_rate",t)},expression:"form.yield_rate"}},[a("template",{slot:"append"},[e._v("%")])],2),e._v(" "),e.errors.has("yieldrate")?a("span",{staticClass:"prompt-title"},[e._v(e._s(e.errors.first("yieldrate")))]):e._e()],1)]),e._v(" "),a("div",{staticClass:"app-form-item"},[e._m(4),e._v(" "),a("div",{staticClass:"app-input-block"},[a("el-select",{attrs:{clearable:"",placeholder:"请选商品单位"},model:{value:e.form.unitId,callback:function(t){e.$set(e.form,"unitId",t)},expression:"form.unitId"}},e._l(e.unitList,function(e,t){return a("el-option",{key:t,attrs:{label:e.name,value:e.id}})}))],1)]),e._v(" "),a("div",{staticClass:"app-form-item"},[e._m(5),e._v(" "),a("div",{staticClass:"app-input-block"},[a("el-input",{directives:[{name:"validate",rawName:"v-validate",value:"required|decimal:5",expression:"'required|decimal:5'"}],class:{formDanger:e.errors.has("purchaseprice")},attrs:{name:"purchaseprice",clearable:"",placeholder:"请输入采购价..."},model:{value:e.form.purchase_price,callback:function(t){e.$set(e.form,"purchase_price",t)},expression:"form.purchase_price"}}),e._v(" "),e.errors.has("purchaseprice")?a("span",{staticClass:"prompt-title"},[e._v(e._s(e.errors.first("purchaseprice")))]):e._e()],1)]),e._v(" "),a("div",{staticClass:"app-form-item"},[e._m(6),e._v(" "),a("div",{staticClass:"app-input-block"},[a("el-input",{directives:[{name:"validate",rawName:"v-validate",value:"required|decimal:5",expression:"'required|decimal:5'"}],class:{formDanger:e.errors.has("balanceprice")},attrs:{name:"balanceprice",clearable:"",placeholder:"请输入默认结算价..."},model:{value:e.form.balance_price,callback:function(t){e.$set(e.form,"balance_price",t)},expression:"form.balance_price"}}),e._v(" "),e.errors.has("balanceprice")?a("span",{staticClass:"prompt-title"},[e._v(e._s(e.errors.first("balanceprice")))]):e._e()],1)]),e._v(" "),a("div",{staticClass:"app-form-item"},[a("label",{staticClass:"app-form-label"},[e._v("原材料排序")]),e._v(" "),a("div",{staticClass:"app-input-block"},[a("el-input",{attrs:{type:"number",placeholder:"请输入原材料排序..."},model:{value:e.form.sort,callback:function(t){e.$set(e.form,"sort",t)},expression:"form.sort"}})],1)]),e._v(" "),a("div",{staticClass:"app-form-item"},[a("label",{staticClass:"app-form-label"},[e._v("原材料描述")]),e._v(" "),a("div",{staticClass:"app-input-block"},[a("el-input",{attrs:{rows:5,placeholder:"请输入原材料描述...",type:"textarea"},model:{value:e.form.desc,callback:function(t){e.$set(e.form,"desc",t)},expression:"form.desc"}})],1)]),e._v(" "),a("div",{staticClass:"app-form-item tr"},[a("el-button",{on:{click:function(t){t.stopPropagation(),e.closePanelHandle(t)}}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){t.stopPropagation(),e.submitHandle(t)}}},[e._v("确定")])],1)])},staticRenderFns:[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("label",{staticClass:"app-form-label"},[a("i",[e._v("*")]),e._v("所属分类")])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("label",{staticClass:"app-form-label"},[a("i",[e._v("*")]),e._v("原材料名称")])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("label",{staticClass:"app-form-label"},[a("i",[e._v("*")]),e._v("库存类型")])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("label",{staticClass:"app-form-label"},[a("i",[e._v("*")]),e._v("出成率")])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("label",{staticClass:"app-form-label"},[a("i",[e._v("*")]),e._v("单位")])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("label",{staticClass:"app-form-label"},[a("i",[e._v("*")]),e._v("采购(成本)价")])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("label",{staticClass:"app-form-label"},[a("i",[e._v("*")]),e._v("默认结算价")])}]}},363:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"appManager-wrapper material-wrapper"},[a("section",{staticClass:"material-tree-box"},[a("el-input",{attrs:{placeholder:"输入原材料编号/名称","prefix-icon":"el-icon-search"},model:{value:e.filterText,callback:function(t){e.filterText=t},expression:"filterText"}}),e._v(" "),a("el-tree",{ref:"tree",staticClass:"filter-tree",attrs:{"show-checkbox":"",data:e.data,"node-key":"id","default-expand-all":"","expand-on-click-node":!1,"filter-node-method":e.filterNode,"render-content":e.renderContent},on:{"check-change":e.checkChangeHandle}})],1),e._v(" "),a("div",{staticClass:"material-list-box"},[a("div",{staticClass:"appManager-top material-top"},[a("el-button",{staticClass:"fl",on:{click:function(t){t.stopPropagation(),e.addMaterialHandle()}}},[e._v("新增原材料")]),e._v(" "),a("el-dropdown",{staticClass:"fl",attrs:{placement:"top-start",trigger:"click"}},[a("el-button",[e._v("\r\n                    操 作 "),a("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),e._v(" "),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",{nativeOn:{click:function(t){t.stopPropagation(),e.importHandle(t)}}},[e._v("导入操作")]),e._v(" "),a("el-dropdown-item",{nativeOn:{click:function(t){t.stopPropagation(),e.exportHandle(t)}}},[e._v("导出操作")]),e._v(" "),a("el-dropdown-item",{nativeOn:{click:function(t){t.stopPropagation(),e.batchDelHandle(t)}}},[e._v("批量删除")])],1)],1),e._v(" "),a("ul",{staticClass:"fr"},[a("el-select",{staticClass:"fl",attrs:{clearable:"",placeholder:"请选择库存类型"},on:{change:e.searchHandle},model:{value:e.search.inventoryId,callback:function(t){e.$set(e.search,"inventoryId",t)},expression:"search.inventoryId"}},e._l(e.inventoryList,function(e,t){return a("el-option",{key:t,attrs:{label:e.name,value:e.id}})})),e._v(" "),a("el-input",{staticClass:"fl",attrs:{placeholder:"请输入原材料编号/名称","prefix-icon":"el-icon-search",clearable:""},nativeOn:{keyup:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13,t.key))return null;e.searchHandle(t)}},model:{value:e.search.searchVal,callback:function(t){e.$set(e.search,"searchVal",t)},expression:"search.searchVal"}})],1)],1),e._v(" "),a("div",{staticClass:"appManager-list fixedTable-list"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{data:e.list,border:""},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"50",fixed:""}}),e._v(" "),a("el-table-column",{attrs:{prop:"name",label:"原材料名称",width:"250",fixed:"",sortable:""}}),e._v(" "),a("el-table-column",{attrs:{prop:"type_2_text",label:"原材料中类",width:"150"}}),e._v(" "),a("el-table-column",{attrs:{prop:"code",label:"原材料编号",width:"150",sortable:""}}),e._v(" "),a("el-table-column",{attrs:{prop:"wm_type_text",label:"库存类型",width:"150"}}),e._v(" "),a("el-table-column",{attrs:{prop:"goods_unit_text",label:"单位(标准)",width:"100"}}),e._v(" "),a("el-table-column",{attrs:{prop:"purchase_price",label:"采购价(成本价)",width:"150",sortable:""}}),e._v(" "),a("el-table-column",{attrs:{prop:"balance_price",label:"默认结算价",width:"130",sortable:""}}),e._v(" "),a("el-table-column",{attrs:{label:"状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tag",{attrs:{size:"medium",type:"1"==t.row.status?"":"danger"}},[e._v("\r\n                            "+e._s(t.row.status_text)+"\r\n                        ")])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"200",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text"},on:{click:function(a){a.stopPropagation(),e.modItemHandle(t.row.id)}}},[a("i",{staticClass:"el-icon-edit"}),e._v(" 修改\r\n                        ")]),e._v(" "),a("el-button",{attrs:{type:"text"},on:{click:function(a){a.stopPropagation(),e.delItemHandle(t.row)}}},[a("i",{class:{"el-icon-circle-close-outline":"1"==t.row.status,"el-icon-circle-check-outline":"1"!=t.row.status}}),e._v("\r\n                            "+e._s("1"==t.row.status?"停用":"启用")+"\r\n                        ")])]}}])})],1),e._v(" "),a("el-pagination",{attrs:{background:"",layout:"prev, pager, next, jumper",total:e.list.total},on:{"current-change":e.handleCurrentChange}})],1)]),e._v(" "),a("ExtractPanel",{attrs:{params:e.addMaterialExtract}},[a("span",{attrs:{slot:"title"},slot:"title"},[e._v("新增原材料")]),e._v(" "),a("AddMaterialPanel",{attrs:{slot:"panel",classid:e.stuffIdForAdd,params:e.addMaterialExtract},on:{reloadEvent:e.reloadGetData},slot:"panel"})],1),e._v(" "),a("ExtractPanel",{attrs:{params:e.modMaterialExtract}},[a("span",{attrs:{slot:"title"},slot:"title"},[e._v("修改原材料信息")]),e._v(" "),a("ModMaterialPanel",{attrs:{slot:"panel",params:e.modMaterialExtract},on:{reloadEvent:e.reloadGetData},slot:"panel"})],1)],1)},staticRenderFns:[]}},372:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-form-panel"},[a("div",{staticClass:"app-form-item"},[e._m(0),e._v(" "),a("div",{staticClass:"app-input-block"},[a("el-select",{attrs:{clearable:"",placeholder:"请选择原材料分类"},model:{value:e.form.stufftypeId,callback:function(t){e.$set(e.form,"stufftypeId",t)},expression:"form.stufftypeId"}},e._l(e.stufftypeList,function(e,t){return a("el-option",{key:t,attrs:{label:e.name,value:e.id,disabled:e.disabled}})}))],1)]),e._v(" "),a("div",{staticClass:"app-form-item"},[e._m(1),e._v(" "),a("div",{staticClass:"app-input-block"},[a("el-input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],class:{formDanger:e.errors.has("materialname")},attrs:{name:"materialname",clearable:"",placeholder:"请输入原材料名称..."},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}}),e._v(" "),e.errors.has("materialname")?a("span",{staticClass:"prompt-title"},[e._v(e._s(e.errors.first("materialname")))]):e._e()],1)]),e._v(" "),a("div",{staticClass:"app-form-item"},[a("label",{staticClass:"app-form-label"},[e._v("原材料编号")]),e._v(" "),a("div",{staticClass:"app-input-block"},[a("el-input",{attrs:{disabled:!0,clearable:"",placeholder:"请输入原材料编号..."},model:{value:e.form.code,callback:function(t){e.$set(e.form,"code",t)},expression:"form.code"}})],1)]),e._v(" "),a("div",{staticClass:"app-form-item"},[e._m(2),e._v(" "),a("div",{staticClass:"app-input-block"},[a("el-select",{attrs:{clearable:"",placeholder:"请选择库存类型"},model:{value:e.form.reptypeId,callback:function(t){e.$set(e.form,"reptypeId",t)},expression:"form.reptypeId"}},e._l(e.repTypeList,function(e,t){return a("el-option",{key:t,attrs:{label:e.name,value:e.id}})}))],1)]),e._v(" "),a("div",{staticClass:"app-form-item"},[e._m(3),e._v(" "),a("div",{staticClass:"app-input-block"},[a("el-input",{directives:[{name:"validate",rawName:"v-validate",value:"required|decimal:5",expression:"'required|decimal:5'"}],class:{formDanger:e.errors.has("yieldrate")},attrs:{name:"yieldrate",clearable:"",placeholder:"请输入出成率..."},model:{value:e.form.yield_rate,callback:function(t){e.$set(e.form,"yield_rate",t)},expression:"form.yield_rate"}},[a("template",{slot:"append"},[e._v("%")])],2),e._v(" "),e.errors.has("yieldrate")?a("span",{staticClass:"prompt-title"},[e._v(e._s(e.errors.first("yieldrate")))]):e._e()],1)]),e._v(" "),a("div",{staticClass:"app-form-item"},[e._m(4),e._v(" "),a("div",{staticClass:"app-input-block"},[a("el-select",{attrs:{clearable:"",placeholder:"请选商品单位"},model:{value:e.form.unitId,callback:function(t){e.$set(e.form,"unitId",t)},expression:"form.unitId"}},e._l(e.unitList,function(e,t){return a("el-option",{key:t,attrs:{label:e.name,value:e.id}})}))],1)]),e._v(" "),a("div",{staticClass:"app-form-item"},[e._m(5),e._v(" "),a("div",{staticClass:"app-input-block"},[a("el-input",{directives:[{name:"validate",rawName:"v-validate",value:"required|decimal:5",expression:"'required|decimal:5'"}],class:{formDanger:e.errors.has("purchaseprice")},attrs:{name:"purchaseprice",clearable:"",placeholder:"请输入采购价..."},model:{value:e.form.purchase_price,callback:function(t){e.$set(e.form,"purchase_price",t)},expression:"form.purchase_price"}}),e._v(" "),e.errors.has("purchaseprice")?a("span",{staticClass:"prompt-title"},[e._v(e._s(e.errors.first("purchaseprice")))]):e._e()],1)]),e._v(" "),a("div",{staticClass:"app-form-item"},[e._m(6),e._v(" "),a("div",{staticClass:"app-input-block"},[a("el-input",{directives:[{name:"validate",rawName:"v-validate",value:"required|decimal:5",expression:"'required|decimal:5'"}],class:{formDanger:e.errors.has("balanceprice")},attrs:{name:"balanceprice",clearable:"",placeholder:"请输入默认结算价..."},model:{value:e.form.balance_price,callback:function(t){e.$set(e.form,"balance_price",t)},expression:"form.balance_price"}}),e._v(" "),e.errors.has("balanceprice")?a("span",{staticClass:"prompt-title"},[e._v(e._s(e.errors.first("balanceprice")))]):e._e()],1)]),e._v(" "),a("div",{staticClass:"app-form-item"},[a("label",{staticClass:"app-form-label"},[e._v("原材料排序")]),e._v(" "),a("div",{staticClass:"app-input-block"},[a("el-input",{attrs:{type:"number",placeholder:"请输入原材料排序..."},model:{value:e.form.sort,callback:function(t){e.$set(e.form,"sort",t)},expression:"form.sort"}})],1)]),e._v(" "),a("div",{staticClass:"app-form-item"},[a("label",{staticClass:"app-form-label"},[e._v("原材料描述")]),e._v(" "),a("div",{staticClass:"app-input-block"},[a("el-input",{attrs:{rows:5,placeholder:"请输入原材料描述...",type:"textarea"},model:{value:e.form.desc,callback:function(t){e.$set(e.form,"desc",t)},expression:"form.desc"}})],1)]),e._v(" "),a("div",{staticClass:"app-form-item tr"},[a("el-button",{on:{click:function(t){t.stopPropagation(),e.closePanelHandle(t)}}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){t.stopPropagation(),e.submitHandle(t)}}},[e._v("确定")])],1)])},staticRenderFns:[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("label",{staticClass:"app-form-label"},[a("i",[e._v("*")]),e._v("所属分类")])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("label",{staticClass:"app-form-label"},[a("i",[e._v("*")]),e._v("原材料名称")])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("label",{staticClass:"app-form-label"},[a("i",[e._v("*")]),e._v("库存类型")])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("label",{staticClass:"app-form-label"},[a("i",[e._v("*")]),e._v("出成率")])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("label",{staticClass:"app-form-label"},[a("i",[e._v("*")]),e._v("单位")])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("label",{staticClass:"app-form-label"},[a("i",[e._v("*")]),e._v("采购(成本)价")])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("label",{staticClass:"app-form-label"},[a("i",[e._v("*")]),e._v("默认结算价")])}]}},391:function(e,t,a){var r=a(304);"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);a(11)("2a41a8fe",r,!0)},396:function(e,t,a){var r=a(309);"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);a(11)("1dffa630",r,!0)},405:function(e,t,a){var r=a(318);"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);a(11)("59d253c0",r,!0)}});
//# sourceMappingURL=5.fb1f676b05372903fc52.min.js.map